<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>advanced system benchmark suite</title>
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Google Sans', sans-serif;
            background: #0a0a0a;
            color: #666;
            padding: 40px 20px;
            overflow-x: hidden;
        }

        .header {
            text-align: center;
            margin-bottom: 60px;
        }

        .header h1 {
            color: #888;
            font-size: 1.8em;
            margin-bottom: 8px;
            font-weight: 400;
        }

        .header p {
            color: #444;
            font-size: 0.9em;
            font-weight: 400;
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 50px;
        }

        button {
            padding: 12px 35px;
            font-size: 0.95em;
            border: 1px solid #222;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 400;
            font-family: 'Google Sans', sans-serif;
            background: #111;
            color: #666;
        }

        .start-btn:hover {
            background: #1a1a1a;
            border-color: #333;
            color: #888;
        }

        .start-btn:disabled {
            background: #0a0a0a;
            color: #333;
            cursor: not-allowed;
            border-color: #1a1a1a;
        }

        .stop-btn:hover {
            background: #1a1a1a;
            border-color: #333;
        }

        .overall-score {
            text-align: center;
            margin-bottom: 50px;
            padding: 30px;
            background: #111;
            border-radius: 4px;
            border: 1px solid #1a1a1a;
        }

        .overall-score h2 {
            color: #555;
            margin-bottom: 15px;
            font-size: 0.9em;
            font-weight: 400;
        }

        .score-value {
            font-size: 3em;
            color: #888;
            font-weight: 400;
        }

        .timer {
            color: #444;
            font-size: 0.9em;
            margin-top: 15px;
            font-weight: 400;
        }

        .benchmark-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .benchmark-card {
            background: #111;
            border-radius: 4px;
            padding: 20px;
            border: 1px solid #1a1a1a;
            transition: all 0.2s;
        }

        .benchmark-card:hover {
            border-color: #222;
        }

        .benchmark-card.running {
            border-color: #2a2a2a;
        }

        .benchmark-title {
            color: #666;
            font-size: 0.95em;
            margin-bottom: 10px;
            font-weight: 400;
        }

        .benchmark-status {
            color: #444;
            margin-bottom: 10px;
            font-size: 0.85em;
            font-weight: 400;
        }

        .benchmark-score {
            color: #888;
            font-size: 2em;
            font-weight: 400;
            margin: 10px 0;
        }

        .progress-bar {
            width: 100%;
            height: 2px;
            background: #1a1a1a;
            border-radius: 1px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: #333;
            width: 0%;
            transition: width 0.3s;
        }

        .benchmark-details {
            font-size: 0.85em;
            color: #555;
            margin-top: 15px;
            line-height: 1.6;
        }

        canvas {
            width: 100%;
            height: 100px;
            border-radius: 4px;
            margin-top: 15px;
            background: #0a0a0a;
        }

        .metric {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
            color: #555;
        }

        .metric-label {
            color: #444;
            font-weight: 400;
        }

        .metric-value {
            color: #666;
            font-weight: 400;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>advanced system benchmark suite</h1>
        <p>16 concurrent stress tests / 60 second duration</p>
    </div>

    <div class="controls">
        <button class="start-btn" id="startBtn" onclick="startBenchmark()">start benchmark</button>
        <button class="stop-btn" id="stopBtn" onclick="stopBenchmark()" disabled>stop benchmark</button>
    </div>

    <div class="overall-score">
        <h2>overall performance score</h2>
        <div class="score-value" id="overallScore">0</div>
        <div class="timer" id="timer">time: 0.0s / 60.0s</div>
    </div>

    <div class="benchmark-grid" id="benchmarkGrid"></div>

    <script>
        const DURATION = 60000;
        let startTime;
        let running = false;
        let animationFrames = [];
        let intervals = [];
        let scores = {};

        const benchmarks = [
            {
                id: 'fibonacci',
                title: 'fibonacci calculator',
                test: fibonacciTest,
                unit: 'calculations/s'
            },
            {
                id: 'primes',
                title: 'prime number generator',
                test: primeTest,
                unit: 'primes/s'
            },
            {
                id: 'matrix',
                title: 'matrix multiplication',
                test: matrixTest,
                unit: 'operations/s'
            },
            {
                id: 'sorting',
                title: 'advanced sorting',
                test: sortingTest,
                unit: 'sorts/s'
            },
            {
                id: 'crypto',
                title: 'cryptographic hashing',
                test: cryptoTest,
                unit: 'hashes/s'
            },
            {
                id: 'canvas2d',
                title: 'canvas 2d rendering',
                test: canvas2DTest,
                unit: 'fps'
            },
            {
                id: 'canvas3d',
                title: 'canvas 3d animation',
                test: canvas3DTest,
                unit: 'fps'
            },
            {
                id: 'dom',
                title: 'dom manipulation',
                test: domTest,
                unit: 'operations/s'
            },
            {
                id: 'string',
                title: 'string processing',
                test: stringTest,
                unit: 'operations/s'
            },
            {
                id: 'regex',
                title: 'regex pattern matching',
                test: regexTest,
                unit: 'matches/s'
            },
            {
                id: 'recursion',
                title: 'deep recursion',
                test: recursionTest,
                unit: 'calls/s'
            },
            {
                id: 'memory',
                title: 'memory allocation',
                test: memoryTest,
                unit: 'mb/s'
            },
            {
                id: 'json',
                title: 'json processing',
                test: jsonTest,
                unit: 'operations/s'
            },
            {
                id: 'array',
                title: 'array operations',
                test: arrayTest,
                unit: 'operations/s'
            },
            {
                id: 'particles',
                title: 'particle system',
                test: particleTest,
                unit: 'particles/s'
            },
            {
                id: 'raycast',
                title: 'ray casting',
                test: raycastTest,
                unit: 'rays/s'
            }
        ];

        function initBenchmarks() {
            const grid = document.getElementById('benchmarkGrid');
            benchmarks.forEach(b => {
                const card = document.createElement('div');
                card.className = 'benchmark-card';
                card.id = `card-${b.id}`;
                card.innerHTML = `
                    <div class="benchmark-title">${b.title}</div>
                    <div class="benchmark-status" id="status-${b.id}">ready</div>
                    <div class="benchmark-score" id="score-${b.id}">0</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-${b.id}"></div>
                    </div>
                    <canvas id="canvas-${b.id}"></canvas>
                    <div class="benchmark-details">
                        <div class="metric">
                            <span class="metric-label">unit:</span>
                            <span class="metric-value">${b.unit}</span>
                        </div>
                        <div class="metric">
                            <span class="metric-label">iterations:</span>
                            <span class="metric-value" id="iter-${b.id}">0</span>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
                scores[b.id] = 0;
            });
        }

        function startBenchmark() {
            running = true;
            startTime = Date.now();
            document.getElementById('startBtn').disabled = true;
            document.getElementById('stopBtn').disabled = false;
            
            benchmarks.forEach(b => {
                document.getElementById(`card-${b.id}`).classList.add('running');
                document.getElementById(`status-${b.id}`).textContent = 'running...';
                b.test(b.id);
            });

            updateTimer();
        }

        function stopBenchmark() {
            running = false;
            animationFrames.forEach(id => cancelAnimationFrame(id));
            intervals.forEach(id => clearInterval(id));
            animationFrames = [];
            intervals = [];
            
            document.getElementById('startBtn').disabled = false;
            document.getElementById('stopBtn').disabled = true;
            
            benchmarks.forEach(b => {
                document.getElementById(`card-${b.id}`).classList.remove('running');
                document.getElementById(`status-${b.id}`).textContent = 'completed';
            });

            calculateOverallScore();
        }

        function updateTimer() {
            if (!running) return;
            
            const elapsed = Date.now() - startTime;
            const progress = Math.min(elapsed / DURATION * 100, 100);
            document.getElementById('timer').textContent = 
                `time: ${(elapsed/1000).toFixed(1)}s / 60.0s`;

            benchmarks.forEach(b => {
                document.getElementById(`progress-${b.id}`).style.width = progress + '%';
            });

            if (elapsed >= DURATION) {
                stopBenchmark();
            } else {
                requestAnimationFrame(updateTimer);
            }
        }

        function updateScore(id, score, iterations) {
            scores[id] = score;
            document.getElementById(`score-${id}`).textContent = Math.round(score);
            document.getElementById(`iter-${id}`).textContent = iterations;
            calculateOverallScore();
        }

        function calculateOverallScore() {
            const total = Object.values(scores).reduce((a, b) => a + b, 0);
            const avg = total / benchmarks.length;
            document.getElementById('overallScore').textContent = Math.round(avg);
        }

        function fibonacciTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let ops = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    fibonacci(20);
                    ops++;
                }
                iterations += ops;
                updateScore(id, ops * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function fibonacci(n) {
            if (n <= 1) return n;
            return fibonacci(n - 1) + fibonacci(n - 2);
        }

        function primeTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let primes = 0;
                const start = performance.now();
                let n = 2;
                while (performance.now() - start < 100) {
                    if (isPrime(n)) primes++;
                    n++;
                }
                iterations += primes;
                updateScore(id, primes * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function isPrime(n) {
            if (n < 2) return false;
            for (let i = 2; i <= Math.sqrt(n); i++) {
                if (n % i === 0) return false;
            }
            return true;
        }

        function matrixTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let ops = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    const a = Array(20).fill().map(() => Array(20).fill(Math.random()));
                    const b = Array(20).fill().map(() => Array(20).fill(Math.random()));
                    multiplyMatrices(a, b);
                    ops++;
                }
                iterations += ops;
                updateScore(id, ops * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function multiplyMatrices(a, b) {
            const result = [];
            for (let i = 0; i < a.length; i++) {
                result[i] = [];
                for (let j = 0; j < b[0].length; j++) {
                    let sum = 0;
                    for (let k = 0; k < a[0].length; k++) {
                        sum += a[i][k] * b[k][j];
                    }
                    result[i][j] = sum;
                }
            }
            return result;
        }

        function sortingTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let ops = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    const arr = Array(1000).fill().map(() => Math.random());
                    arr.sort((a, b) => a - b);
                    ops++;
                }
                iterations += ops;
                updateScore(id, ops * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function cryptoTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let hashes = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    simpleHash(Math.random().toString());
                    hashes++;
                }
                iterations += hashes;
                updateScore(id, hashes * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function simpleHash(str) {
            let hash = 0;
            for (let i = 0; i < str.length; i++) {
                const char = str.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return hash;
        }

        function canvas2DTest(id) {
            const canvas = document.getElementById(`canvas-${id}`);
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 100;
            let frames = 0;
            let lastTime = performance.now();
            let iterations = 0;

            function animate() {
                if (!running) return;
                
                ctx.fillStyle = '#0a0a0a';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                for (let i = 0; i < 50; i++) {
                    const gray = 30 + (i * 2);
                    ctx.fillStyle = `rgb(${gray}, ${gray}, ${gray})`;
                    ctx.beginPath();
                    ctx.arc(
                        (Date.now() / 10 + i * 20) % canvas.width,
                        50 + Math.sin(Date.now() / 200 + i) * 30,
                        8, 0, Math.PI * 2
                    );
                    ctx.fill();
                }
                
                frames++;
                iterations++;
                const now = performance.now();
                if (now - lastTime >= 1000) {
                    updateScore(id, frames, iterations);
                    frames = 0;
                    lastTime = now;
                }
                
                animationFrames.push(requestAnimationFrame(animate));
            }
            animate();
        }

        function canvas3DTest(id) {
            const canvas = document.getElementById(`canvas-${id}`);
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 100;
            let frames = 0;
            let lastTime = performance.now();
            let iterations = 0;

            function animate() {
                if (!running) return;
                
                ctx.fillStyle = '#0a0a0a';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                const time = Date.now() / 1000;
                for (let i = 0; i < 30; i++) {
                    const angle = time + i * 0.2;
                    const x = canvas.width / 2 + Math.cos(angle) * (40 + i * 2);
                    const y = canvas.height / 2 + Math.sin(angle) * (25 + i * 2);
                    const z = Math.sin(time + i * 0.1) * 50 + 100;
                    const scale = 200 / (200 + z);
                    const gray = Math.floor(30 + scale * 70);
                    
                    ctx.fillStyle = `rgb(${gray}, ${gray}, ${gray})`;
                    ctx.beginPath();
                    ctx.arc(x, y, 4 * scale, 0, Math.PI * 2);
                    ctx.fill();
                }
                
                frames++;
                iterations++;
                const now = performance.now();
                if (now - lastTime >= 1000) {
                    updateScore(id, frames, iterations);
                    frames = 0;
                    lastTime = now;
                }
                
                animationFrames.push(requestAnimationFrame(animate));
            }
            animate();
        }

        function domTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let ops = 0;
                const start = performance.now();
                const container = document.createElement('div');
                while (performance.now() - start < 100) {
                    for (let i = 0; i < 10; i++) {
                        const el = document.createElement('div');
                        el.textContent = Math.random();
                        container.appendChild(el);
                    }
                    container.innerHTML = '';
                    ops += 10;
                }
                iterations += ops;
                updateScore(id, ops * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function stringTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let ops = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    let str = 'benchmark';
                    str = str.repeat(100).toUpperCase().split('').reverse().join('');
                    ops++;
                }
                iterations += ops;
                updateScore(id, ops * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function regexTest(id) {
            let iterations = 0;
            const text = 'benchmark'.repeat(1000);
            const interval = setInterval(() => {
                if (!running) return;
                let matches = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    const result = text.match(/bench|mark|test/g);
                    matches += result ? result.length : 0;
                }
                iterations += matches;
                updateScore(id, matches / 100, iterations);
            }, 100);
            intervals.push(interval);
        }

        function recursionTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let calls = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    deepRecursion(100);
                    calls += 100;
                }
                iterations += calls;
                updateScore(id, calls * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function deepRecursion(n) {
            if (n <= 0) return 1;
            return n * deepRecursion(n - 1) / n;
        }

        function memoryTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let mb = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    const arr = new Array(10000).fill(Math.random());
                    mb += arr.length * 8 / 1024 / 1024;
                }
                iterations += mb;
                updateScore(id, mb * 10, Math.round(iterations));
            }, 100);
            intervals.push(interval);
        }

        function jsonTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let ops = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    const obj = {a: 1, b: 2, c: [1,2,3], d: {e: 4}};
                    JSON.stringify(obj);
                    JSON.parse(JSON.stringify(obj));
                    ops++;
                }
                iterations += ops;
                updateScore(id, ops * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function arrayTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let ops = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    const arr = Array(1000).fill(0).map((_, i) => i);
                    arr.filter(x => x % 2).map(x => x * 2).reduce((a, b) => a + b, 0);
                    ops++;
                }
                iterations += ops;
                updateScore(id, ops * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        function particleTest(id) {
            const canvas = document.getElementById(`canvas-${id}`);
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 100;
            
            const particles = Array(100).fill().map(() => ({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                vx: (Math.random() - 0.5) * 2,
                vy: (Math.random() - 0.5) * 2
            }));
            
            let frames = 0;
            let lastTime = performance.now();
            let iterations = 0;

            function animate() {
                if (!running) return;
                
                ctx.fillStyle = 'rgba(10, 10, 10, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    if (p.x < 0 || p.x > canvas.width) p.vx *= -1;
                    if (p.y < 0 || p.y > canvas.height) p.vy *= -1;
                    
                    ctx.fillStyle = '#444';
                    ctx.beginPath();
                    ctx.arc(p.x, p.y, 2, 0, Math.PI * 2);
                    ctx.fill();
                });
                
                frames++;
                iterations += particles.length;
                const now = performance.now();
                if (now - lastTime >= 1000) {
                    updateScore(id, frames * particles.length, iterations);
                    frames = 0;
                    lastTime = now;
                }
                
                animationFrames.push(requestAnimationFrame(animate));
            }
            animate();
        }

        function raycastTest(id) {
            let iterations = 0;
            const interval = setInterval(() => {
                if (!running) return;
                let rays = 0;
                const start = performance.now();
                while (performance.now() - start < 100) {
                    for (let i = 0; i < 100; i++) {
                        const angle = Math.random() * Math.PI * 2;
                        const dx = Math.cos(angle);
                        const dy = Math.sin(angle);
                        let x = 0, y = 0;
                        for (let step = 0; step < 50; step++) {
                            x += dx;
                            y += dy;
                        }
                        rays++;
                    }
                }
                iterations += rays;
                updateScore(id, rays * 10, iterations);
            }, 100);
            intervals.push(interval);
        }

        initBenchmarks();
    </script>
</body>
</html>
